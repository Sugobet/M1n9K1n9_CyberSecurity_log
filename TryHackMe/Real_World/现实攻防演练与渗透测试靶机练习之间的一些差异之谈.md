# 现实攻防演练与渗透测试靶机练习之间的一些差异之谈

## 前言

下面的部分内容来自阅读**情报分析心理学**时的个人观点与之结合。

事实上，在参加前不久的那场攻防演练之前，我并没有过一次**合法且真正意义上的渗透测试**经历；正式开始那场攻防演练，在面对陌生的环境时，我们会自然而然地利用过去我们行之有效的各种方式方法来应对未知的事物。

我并不是在讲谜语，这些理论感悟来自于**情报分析心理学》**。

换句话说，我们会会采取各种各样曾经我们在应对靶机的那一套老方法去应对我们攻防演练或现实渗透测试等的攻击目标。

当然，我的意思并不是完全否定这一做法，毕竟不管是我或是其它人，这是大部分人都应该会这样做，因为我们发现了过去一些技巧方法与当前正在合法渗透攻击的目标环境有着相似的地方，这叫做**经验**，许多时候大部分人在应对未知的环境下，我们很大程度也只能根据个人以往经验来做出判断。

但就像**情报分析心理学**当中对于**思维的局限性**所提到的一样，我们通过一个简化的思维模型来进行思考，但这个模型并不一定能适应所有环境。

**（事实上，在彻底阅读该书后，我们应该能明白，我们应该学会从多个不同角度观察事物，本质上就是在多个不同思维模型之间跳跃，这将有利跳出上述思维的局限性或很大程度减少其带来的影响）**

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/ddcdfb8e4eb149019e82e29265ffed2f.png)


---

## 范围

首先第一个也是最明显的差异，那就是数量。面对一家甚至是多家攻击目标时，我们并不像通常打靶机那样，拿到一个ip就是打。我们甚至连ip、域名等相关资产范围信息都得自己收集。我们可能会从过去一个ip开局 变成 一个 公司名 开局。

就像我过去几篇文章中提到过的**鹰图**那样，它会帮助我们解决麻烦，至少它会尽它所能来帮助我们查找直接属于目标公司的资产。

并且数量上在多数情况下也不太可比，我们会面临非常目标资产，当然也可能一个都找不到。

在前期，相比于平时打靶机常用的各种爆破手段，如：子域爆破、vhost爆破、目录扫描等fuzzing，寻找已公开的信息会相对更有利，也更简单而有效的获取到信息。（被动侦察、OSINT）

## 攻击链

我们在面对现实攻击目标时，难免会出现一些你**目前看起来**确实坚不可摧或本身就是坚不可摧的资产，无论你如何捣鼓都很难有所突破。我们不是神，我们无法凭空捏造、无中生有 一样来创造出漏洞。

当前也或是我们形成了思维定式，无论如何想，就是想不到其它技巧方法。

回到我真正想表达的，现实攻击目标的资产不像靶机那样，一定有攻击路径或漏洞，当我们决心硬怼某个资产时，我们必须要注意这一点，尤其是攻击时间特别有限的情况下更是致命的，这很有可能导致我们怼到最后也没有任何收获和产出。

我们可以换种思路或是方法来进行深入尝试，如果还是失败，我们学会暂时性放手，转而看向其它资产目标。

当然，我们即使我们快速的转移了视线，到最后仍然一无所获。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/9c6ac7ab4caa444f8531b85aa615ba68.png)

但真的一无所获吗？也许并不一定，至少我们对目标的资产情况有了更近一步的了解，又或者是我们得知了一些通用密码策略、公开的秘密。

当我们仔细的将目标所有信息全部翻出来审计时，我们是与一开始毫无头绪的乱打是完全不一样的。

第一点，我们会将第一眼遗漏掉的信息再次捡起来，它或许会是那把关键的钥匙。

第二点，也是情报分析心理学中，第二章提及过的一点：**与在较晚阶段和信息更充分准确时才初次接触某一问题的人，如决策者相比，情报分析人员是在信息十分模糊的初期就开始观察潜在问题，因而处于不利位置。**

尽管最初模糊的信息刺激仍可能影响我们，但相较于刚开始没有任何信息的我们，现在对拥有的信息进行分析也依然相对有利。

## 攻击技巧

我们通常根据ROE交战规则的要求来选择我们的poc、exp，甚至是影响攻击路径，哪些攻击路径能使用和不能使用等等，在这次的攻防演练中，我可能不会涉及太多opsec问题，因为防守方通常比较落后甚至是不存在。

所以可以像打靶机那样，放开来打；但仍有一点需要注意，一些严重危害业务、无法恢复等的攻击技巧应该避免，这一点在thm的域持久化教程中也有类似的体现。

毕竟，靶机我们可以重置许多遍，但现实攻击目标服务器我们只有一次机会，出了故障，我们可能会承担法律责任。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/141b10a24f9348e2a21c9d056e3a493d.png)

## 结尾

网络安全最大的挑战和困难就是**未知**，我们尝试去打破它吧
